/* Tailwind CSS Directives */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* Custom Font Imports - Optimized with font-display and reduced weights */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@600;700&display=swap');
@import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600&display=swap');

/* Base Layer Customizations */
@layer base {
  html {
    @apply scroll-smooth;
  }

  body {
    @apply bg-gray-50 text-gray-900 antialiased;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
  }

  h1, h2, h3, h4, h5, h6 {
    @apply font-heading font-bold tracking-tight;
  }

  /* Focus styles for accessibility - only remove outline for mouse users */
  *:focus:not(:focus-visible) {
    @apply outline-none;
  }

  *:focus-visible {
    @apply ring-2 ring-primary ring-offset-2 outline-none;
  }
}

/* Component Layer */
@layer components {
  /* Button Variants */
  .btn {
    @apply px-4 py-2 font-medium rounded-lg transition-all duration-200 inline-flex items-center justify-center;
  }

  .btn-primary {
    @apply bg-primary text-white hover:bg-primary-dark focus:ring-2 focus:ring-primary focus:ring-offset-2;
  }

  .btn-secondary {
    @apply bg-gray-200 text-gray-800 hover:bg-gray-300 focus:ring-2 focus:ring-gray-500 focus:ring-offset-2;
  }

  .btn-accent {
    @apply bg-accent text-white hover:bg-accent-dark focus:ring-2 focus:ring-accent focus:ring-offset-2;
  }

  .btn-ghost {
    @apply bg-transparent hover:bg-gray-100 text-gray-700;
  }

  /* Card Component */
  .card {
    @apply bg-white rounded-xl shadow-card p-6 transition-shadow duration-200;
  }

  .card-hover {
    @apply hover:shadow-card-hover;
  }

  /* Form Controls */
  .form-input {
    @apply w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-colors duration-200;
  }

  .form-label {
    @apply block text-sm font-medium text-gray-700 mb-1;
  }

  .form-error {
    @apply text-danger text-sm mt-1;
  }

  /* Glass Morphism Effect */
  .glass {
    @apply bg-white/80 backdrop-blur-md border border-white/20;
  }

  /* Loading Skeleton */
  .skeleton {
    @apply animate-pulse bg-gray-200 rounded;
  }

  /* Container */
  .container-custom {
    @apply max-w-7xl mx-auto px-4 sm:px-6 lg:px-8;
  }
}

/* Utility Layer */
@layer utilities {
  /* Text Gradient */
  .text-gradient {
    @apply bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent;
  }

  /* Custom Animations */
  .animate-float {
    animation: float 3s ease-in-out infinite;
  }

  .animate-glow {
    animation: glow 2s ease-in-out infinite;
  }

  /* Hide Scrollbar */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  /* Custom Scrollbar */
  .scrollbar-custom {
    scrollbar-width: thin;
    scrollbar-color: theme('colors.primary.light') theme('colors.gray.100');
  }

  .scrollbar-custom::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  .scrollbar-custom::-webkit-scrollbar-track {
    @apply bg-gray-100 rounded-full;
  }

  .scrollbar-custom::-webkit-scrollbar-thumb {
    @apply bg-primary-light rounded-full hover:bg-primary;
  }
}

/* Custom Styles */
.loader {
  border: 3px solid theme('colors.gray.200');
  border-top-color: theme('colors.primary.DEFAULT');
  border-radius: 50%;
  width: 40px;
  height: 40px;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

/* Override any conflicting styles from old CSS files */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

/* Feed and Header Styles */
@layer components {
  /* Header Styles */
  .header {
    @apply fixed top-0 left-0 right-0 bg-white border-b border-gray-200 z-40 shadow-sm;
  }

  .header-container {
    @apply max-w-7xl mx-auto px-4 py-3 flex items-center justify-between gap-4;
  }

  .header-left {
    @apply flex items-center gap-4 flex-1;
  }

  .header-logo {
    @apply flex items-center text-primary hover:text-primary-dark transition-colors;
  }

  .header-search {
    @apply relative flex-1 max-w-md hidden md:block;
  }

  .search-icon {
    @apply absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 text-xl pointer-events-none;
  }

  .search-input {
    @apply w-full pl-10 pr-4 py-2 bg-gray-100 border border-transparent rounded-full text-sm
           focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary focus:bg-white
           transition-all duration-200;
  }

  .header-center {
    @apply flex items-center justify-center gap-2;
  }

  .nav-link {
    @apply p-3 rounded-lg text-gray-600 hover:bg-gray-100 hover:text-primary transition-all duration-200
           flex items-center justify-center relative;
  }

  .nav-link.active {
    @apply text-primary bg-primary/10;
  }

  .nav-link.active::after {
    content: '';
    @apply absolute bottom-0 left-0 right-0 h-1 bg-primary rounded-t-full;
  }

  .header-right {
    @apply flex items-center gap-2;
  }

  .header-icon-button {
    @apply p-2 rounded-lg text-gray-600 hover:bg-gray-100 hover:text-primary transition-all duration-200
           flex items-center justify-center text-2xl relative;
  }

  .header-profile {
    @apply relative;
  }

  .profile-button {
    @apply flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-gray-100 transition-all duration-200;
  }

  .profile-avatar {
    @apply w-8 h-8 rounded-full flex items-center justify-center text-white font-semibold text-sm;
    background: linear-gradient(135deg, #475569 0%, #334155 100%);
    box-shadow: 0 2px 8px rgba(71, 85, 105, 0.3);
  }

  .profile-name {
    @apply text-sm font-medium text-gray-700 hidden md:block;
  }

  .notification-badge {
    @apply absolute top-0 right-0 bg-danger text-white text-xs font-bold rounded-full w-5 h-5
           flex items-center justify-center border-2 border-white;
  }

  /* Dropdown Menu Styles */
  .dropdown-menu {
    @apply absolute right-0 mt-2 w-80 bg-white rounded-xl shadow-xl border border-gray-200
           overflow-hidden z-50 animate-fade-in-down;
  }

  .dropdown-header {
    @apply px-4 py-3 border-b border-gray-200 bg-gray-50;
  }

  .dropdown-header h3 {
    @apply font-semibold text-gray-900;
  }

  .dropdown-item {
    @apply w-full px-4 py-3 flex items-start gap-3 hover:bg-gray-50 transition-colors duration-150
           text-left border-none bg-transparent cursor-pointer;
  }

  .dropdown-item-icon {
    @apply text-2xl flex-shrink-0;
  }

  .dropdown-item-title {
    @apply font-medium text-gray-900;
  }

  .dropdown-item-subtitle {
    @apply text-sm text-gray-500;
  }

  .dropdown-divider {
    @apply border-t border-gray-200;
  }

  .profile-menu {
    @apply w-64;
  }

  .notifications-menu {
    @apply max-h-96 overflow-y-auto scrollbar-custom;
  }

  .notification-item {
    @apply flex items-start gap-3 px-4 py-3 hover:bg-gray-50 transition-colors duration-150 cursor-pointer;
  }

  .notification-icon {
    @apply text-2xl flex-shrink-0;
  }

  .notification-content {
    @apply flex-1;
  }

  .notification-content p {
    @apply text-sm text-gray-700 mb-1;
  }

  .notification-time {
    @apply text-xs text-gray-500;
  }

  /* Feed Layout Styles */
  .feed-container {
    @apply min-h-screen pt-16;
    background: #f3f4f6;
  }

  .feed-main {
    @apply max-w-7xl mx-auto px-4 py-4;
  }

  .feed-layout {
    @apply grid grid-cols-1 lg:grid-cols-12 gap-6;
  }

  .feed-sidebar-left {
    @apply hidden lg:block lg:col-span-3;
  }

  .feed-content {
    @apply lg:col-span-6 space-y-4;
  }

  .feed-sidebar-right {
    @apply hidden lg:block lg:col-span-3;
  }

  /* Sidebar Styles */
  .sidebar {
    @apply bg-white rounded-lg p-3 sticky top-20 space-y-1;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.06);
    border: 1px solid #e5e7eb;
  }

  .sidebar-item {
    @apply flex items-center gap-3 px-3 py-2 rounded-lg transition-all duration-200
           text-gray-700 hover:bg-gray-100;
  }

  .sidebar-icon {
    @apply text-2xl flex-shrink-0;
  }

  .sidebar-label {
    @apply text-sm font-medium;
  }

  .sidebar-footer {
    @apply mt-8 pt-4 border-t border-gray-200;
  }

  .footer-links {
    @apply text-xs text-gray-500 space-x-1 mb-2;
  }

  .footer-links a {
    @apply hover:underline;
  }

  .copyright {
    @apply text-xs text-gray-400;
  }

  /* Right Panel Styles */
  .right-panel {
    @apply bg-white rounded-lg p-4 sticky top-20;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.06);
    border: 1px solid #e5e7eb;
  }

  /* Create Post Styles */
  .create-post-card {
    @apply bg-white rounded-lg p-4 mb-4;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.06);
    border: 1px solid #e5e7eb;
  }

  .create-post-header {
    @apply flex items-center gap-3;
  }

  .user-avatar {
    @apply w-10 h-10 rounded-full flex items-center justify-center text-white font-semibold;
    background: linear-gradient(135deg, #475569 0%, #334155 100%);
    box-shadow: 0 2px 8px rgba(71, 85, 105, 0.3);
  }

  .user-avatar.small {
    @apply w-8 h-8 text-sm;
  }

  .create-post-input {
    @apply flex-1 px-4 py-2.5 bg-gray-100 hover:bg-gray-200
           rounded-full text-gray-500 text-left transition-all duration-200 cursor-pointer
           border-none text-base;
  }

  .create-post-footer {
    @apply flex items-center justify-around gap-1 pt-3 mt-3 border-t border-gray-200;
  }

  .footer-button {
    @apply flex items-center justify-center gap-2 px-3 py-2 rounded-lg hover:bg-gray-100
           transition-all duration-200 text-sm font-medium text-gray-600
           flex-1;
  }

  .button-icon {
    @apply flex-shrink-0;
  }

  /* Post Card Styles */
  .post-card {
    @apply bg-white rounded-lg mb-4;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.06);
    border: 1px solid #e5e7eb;
  }

  .post-header {
    @apply flex items-start justify-between p-4 pb-3;
  }

  .post-user {
    @apply flex items-center gap-3;
  }

  .user-info {
    @apply flex flex-col;
  }

  .user-name {
    @apply font-semibold text-gray-900 text-base;
  }

  .post-timestamp {
    @apply text-sm text-gray-500 font-normal;
  }

  .post-menu {
    @apply p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-all duration-200;
  }

  .post-content {
    @apply px-4 pb-3;
  }

  .post-content p {
    @apply text-gray-900 leading-relaxed text-base;
  }

  .post-image {
    @apply overflow-hidden mt-3;
  }

  .post-image img {
    @apply w-full object-cover;
  }

  .post-stats {
    @apply flex items-center justify-between px-4 py-2;
  }

  .stats-left, .stats-right {
    @apply flex items-center gap-4;
  }

  .like-count, .comment-count {
    @apply flex items-center gap-1.5 text-sm text-gray-600 cursor-pointer hover:underline transition-all duration-200;
  }

  .like-count:hover, .comment-count:hover {
    @apply text-gray-800;
  }

  .post-actions {
    @apply flex items-center justify-around border-t border-gray-200 pt-1 pb-1;
  }

  .action-button {
    @apply flex items-center justify-center gap-2 px-4 py-2 rounded-md transition-all duration-200
           text-gray-600 font-medium text-base flex-1 hover:bg-gray-100;
  }

  .action-button.liked {
    color: #f97316;
    font-weight: 600;
  }

  .post-comments {
    @apply px-4 pb-4 pt-3 border-t border-gray-200 space-y-3 bg-gray-50;
  }

  .comment-form {
    @apply flex items-center gap-2;
  }

  .comment-input {
    @apply flex-1 px-4 py-2 bg-white border border-gray-200 rounded-full text-sm focus:outline-none focus:border-gray-400
           transition-all duration-200;
  }

  .comment-submit {
    @apply w-8 h-8 flex items-center justify-center text-white rounded-full
           transition-all duration-300 hover:scale-110;
    background: linear-gradient(135deg, #475569 0%, #334155 100%);
    box-shadow: 0 2px 8px rgba(71, 85, 105, 0.3);
  }

  .comment-submit:hover {
    box-shadow: 0 4px 12px rgba(71, 85, 105, 0.4);
  }

  .comment {
    @apply flex items-start gap-2;
  }

  .comment-content {
    @apply flex-1;
  }

  .comment-bubble {
    @apply bg-gray-200 rounded-2xl px-3 py-2;
  }

  .comment-user {
    @apply font-semibold text-sm text-gray-900 mb-1;
  }

  .comment-text {
    @apply text-sm text-gray-700;
  }

  .comment-actions {
    @apply flex items-center gap-3 mt-1 px-2;
  }

  .comment-time, .comment-action {
    @apply text-xs text-gray-500 hover:underline cursor-pointer;
  }

  /* Posts Container */
  .posts-container {
    @apply space-y-4;
  }

  .no-posts {
    @apply bg-white rounded-xl shadow-sm p-12 text-center;
  }

  .no-posts p {
    @apply text-gray-500;
  }

  /* Animation Helpers */
  .hover-lift {
    @apply transition-transform duration-200 hover:scale-[1.02];
  }

  .hover-grow {
    @apply transition-transform duration-200 hover:scale-110;
  }

  .heartbeat {
    animation: heartbeat 1.5s ease-in-out infinite;
  }

  /* Modal Styles (for CreatePost modal) */
  .create-post-modal {
    @apply fixed inset-0 z-50 flex items-center justify-center p-4;
  }

  .modal-overlay {
    @apply absolute inset-0 bg-black/50 backdrop-blur-sm;
  }

  .modal-content {
    @apply relative bg-white rounded-2xl shadow-2xl w-full max-w-lg max-h-[90vh] overflow-hidden flex flex-col;
  }

  .modal-header {
    @apply flex items-center justify-between p-6 border-b border-gray-200;
  }

  .modal-header h2 {
    @apply text-2xl font-bold text-gray-900;
  }

  .close-button {
    @apply p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors;
  }

  .modal-user {
    @apply flex items-center gap-3 p-6;
  }

  .post-privacy {
    @apply text-sm text-gray-500;
  }

  .post-textarea {
    @apply w-full p-6 min-h-[150px] text-gray-700 resize-none focus:outline-none;
  }

  .modal-actions {
    @apply p-6 border-t border-gray-200 space-y-4;
  }

  .add-to-post {
    @apply flex items-center justify-between;
  }

  .add-to-post span {
    @apply text-sm font-medium text-gray-700;
  }

  .post-options {
    @apply flex items-center gap-2;
  }

  .option-button {
    @apply p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-all duration-200 text-xl;
  }

  .post-button {
    @apply w-full btn py-3 disabled:opacity-50 disabled:cursor-not-allowed font-semibold text-white
           transition-all duration-300;
    background: linear-gradient(135deg, #475569 0%, #334155 100%);
    box-shadow: 0 4px 12px rgba(71, 85, 105, 0.25);
  }

  .post-button:hover:not(:disabled) {
    box-shadow: 0 6px 20px rgba(71, 85, 105, 0.35);
    transform: translateY(-1px);
  }
}